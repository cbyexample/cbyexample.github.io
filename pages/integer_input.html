<h1 id="reading-integer-input">Reading integer input</h1>
<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;errno.h&gt;

int main(void)
{
    /*
     * This is a correct way to read an integer value from an input stream in C.
     */
    char buffer[100];
    
    if (!fgets(buffer, 100, stdin))
        return 1;

    char *end;
    errno = 0;
    long value = strtol(buffer, &amp;end, 10);

    if ((*end &amp;&amp; *end != &#39;\n&#39;) || end == buffer)
        return 1;

    if (errno)
        return 2;

    return 0;
}</code></pre>
